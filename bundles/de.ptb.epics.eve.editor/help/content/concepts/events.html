<?xml version='1.0' encoding='utf-8' ?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><title>events</title><link type="text/css" rel="stylesheet" href="PLUGINS_ROOT/de.ptb.epics.eve.editor/help/css/editor.css"/></head><body><h1 id="Events" class="eveTopic">Events</h1><p>Events are a way to affect a scan, e.g. by pausing it if a condition is met. Three types (describing their source) of events exist:</p><ul><li><strong>SCHEDULE</strong>: a schedule event is triggered when a scan module is finished.</li><li><strong>DETECTOR</strong>: a detector event is triggered when a detector is ready.</li><li><strong>MONITOR</strong>: a monitor event sends <code>true</code> or <code>false</code> whether a condition is met.</li></ul><p>The effect (or outcome) of an event is defined by the location the event is added to. Events could be added to a <em>chain</em>, a <em>scan module</em> or a <em>detector channel</em> in their respective <a href="../gettingstarted.html">views</a>. Each view has one or more tabs, one for each outcome:</p><table class="eveDataTable"><tr><th>View</th><th>Pause</th><th>Redo</th><th>Break</th><th>Stop</th><th>Trigger</th></tr><tr><td style="text-align: left;">Chain</td><td>+</td><td>+</td><td>+</td><td>+</td><td></td></tr><tr><td style="text-align: left;">Scan Module</td><td>+</td><td>+</td><td>+</td><td></td><td>+</td></tr><tr><td style="text-align: left;">Detector Channel</td><td></td><td>+</td><td></td><td></td><td></td></tr></table><p>Monitor conditions are evaluated at the start of a chain/scan module.</p><h2 id="Outcomes" class="eveTopic">Outcomes</h2><p>The effect an event has depends on its outcome which is one of <em>pause</em>, <em>redo</em>, <em>break</em>, <em>stop</em>, <em>trigger</em>. </p><h3 id="PauseEvent" class="eveTopic">Pause Event</h3><p>The scan has a state which is either <em>running</em> or <em>pause</em>. A detector or schedule event (trigger events) can manipulate that state by its action attribute as follows:</p><table class="eveDataTable"><tr><th>Row</th><th>Scan State (current)</th><th>Event Action</th><th>Scan State (result)</th></tr><tr><td>1</td><td><em>running</em></td><td><em>ON</em></td><td><em>pause</em></td><td>*</td></tr><tr><td>2</td><td><em>running</em></td><td><em>OFF</em></td><td><em>running</em></td></tr><tr><td>3</td><td><em>pause</em></td><td><em>ON</em></td><td><em>pause</em></td></tr><tr><td>4</td><td><em>pause</em></td><td><em>OFF</em></td><td><em>running</em></td><td>*</td></tr></table><p><ins>Note</ins>: Scenarios shown in row two and three have no effect at all since the scan state does not change.</p><p>Since monitor events do not just trigger when they occur but signal whether a specified condition is met there are more possible scenarios:</p><table class="eveDataTable"><tr><th>Row</th><th>Scan State (current)</th><th>Event Action</th><th>condition</th><th>Scan State (result)</th></tr><tr><td>1</td><td><em>running</em></td><td><em>ON</em></td><td><em>true</em></td><td><em>pause</em></td><td>*</td></tr><tr><td>2</td><td><em>running</em></td><td><em>ON</em></td><td><em>false</em></td><td><em>running</em></td></tr><tr><td>3</td><td><em>running</em></td><td><em>OFF</em></td><td><em>true</em></td><td><em>running</em></td></tr><tr><td>4</td><td><em>running</em></td><td><em>OFF</em></td><td><em>false</em></td><td><em>running</em></td></tr><tr><td>5</td><td><em>running</em></td><td><em>ONOFF</em></td><td><em>true</em></td><td><em>pause</em></td><td>*</td></tr><tr><td>6</td><td><em>running</em></td><td><em>ONOFF</em></td><td><em>false</em></td><td><em>running</em></td></tr><tr><td>7</td><td><em>pause</em></td><td><em>ON</em></td><td><em>true</em></td><td><em>pause</em></td></tr><tr><td>8</td><td><em>pause</em></td><td><em>ON</em></td><td><em>false</em></td><td><em>pause</em></td></tr><tr><td>9</td><td><em>pause</em></td><td><em>OFF</em></td><td><em>true</em></td><td><em>running</em></td><td>*</td></tr><tr><td>10</td><td><em>pause</em></td><td><em>OFF</em></td><td><em>false</em></td><td><em>pause</em></td></tr><tr><td>11</td><td><em>pause</em></td><td><em>ONOFF</em></td><td><em>true</em></td><td><em>running</em></td><td>*</td></tr><tr><td>12</td><td><em>pause</em></td><td><em>ONOFF</em></td><td><em>false</em></td><td><em>pause</em></td></tr></table><p>If the specified condition is not met nothing happens at all (even rows). Rows three and seven just overwrite the state with the same value. The behavior in rows one and nine is equal to the behavior of detector and schedule events. Rows five and eleven show the behavior specific to monitor events due to the additional <em>ONOFF</em> action.</p><p><ins>Note</ins>: Each event can continue the scan (stop the pause) regardless of which event paused it. <a href="#combine">Read more</a> on combining events.</p><h3 id="RedoEvent" class="eveTopic">Redo Event</h3><p>If caused by trigger events (detector or schedule) the detector is read again or the scan module is executed again respectively. Monitor events behave the same way (redo if condition is <code>true</code>) except that they will pause the scan before reading/executing again until the event sends <code>false</code>.</p><h3 id="BreakEvent" class="eveTopic">Break Event</h3><p>Skips the current chain or scan module. Post scan actions of the scan module are still executed.</p><h3 id="StopEvent" class="eveTopic">Stop Event</h3><p>Stops the current chain. Post scan actions of the currently active scan module are still executed.</p><h3 id="TriggerEvent" class="eveTopic">Trigger Event</h3><p>Caused by a trigger event (detector or schedule) and monitor event sending <code>true</code>.</p><h3 id="MonitorEventinaScanModule" class="eveTopic">Monitor Event in a Scan Module</h3><table class="eveDataTable"><tr><th>Event</th><th>during initialization</th><th>at start</th><th>in the Scan Module</th></tr><tr><td style="text-align: left;">Pause</td><td>no action</td><td>ScanModule paused</td><td>ScanModule paused</td></tr><tr><td style="text-align: left;">Redo</td><td>no action</td><td>no scan point reading</td><td>no scan point reading</td></tr><tr><td style="text-align: left;">Skip</td><td>no action</td><td><span class="red">no action</span></td><td>skip to next ScanModule</td></tr></table><h3 id="MonitorEventintheChain" class="eveTopic">Monitor Event in the Chain</h3><table class="eveDataTable"><tr><th>Event</th><th>during initialization</th><th>at start</th><th>in the Scan Module</th></tr><tr><td style="text-align: left;">Pause</td><td>no action</td><td>ScanModule paused</td><td>ScanModule paused</td></tr><tr><td style="text-align: left;">Redo</td><td>no action</td><td>no scan point reading</td><td>no scan point reading</td></tr><tr><td style="text-align: left;">Skip</td><td>no action</td><td><span class="red">no action</span></td><td>Skip to next ScanModule</td></tr><tr><td style="text-align: left;">Stop</td><td><span class="red">exit scan</span></td><td><span class="red">not possible</span></td><td>Stop the Scan</td></tr></table><h2 id="combine" class="eveTopic|">Combining <em>Chain</em> and <em>ScanModule</em> Events</h2><p>Chains and scan modules have <em>independent</em> pause states, i.e. both scan module and chain states must be <em>running</em> in order to continue a scan.</p><p>When monitor events are combined (one in the chain, one in the scan module) a redo, pause...  occurs if at least one of their last sent values was <code>true</code>. But only when both last sent <code>false</code> the scan continues normally.</p><h3 id="Example1" class="eveTopic">Example 1</h3><p>2 Pause Events in a ScanModule: SMEvent1 and SMEvent2 with Action <em>ONOFF</em></p><p>Scan start with SMEvent1 = <code>false</code> and SMEvent2 = <code>false</code></p><p>SMEvent1 = <code>true</code> =&gt; ScanModule paused<br/>SMEvent2 = <code>true</code> =&gt; nothing happens<br/>SMEvent2 = <code>false</code> =&gt; ScanModuel continues running <br/>SMEvent1 = <code>false</code> =&gt; nothing happens</p><h3 id="Example2" class="eveTopic">Example 2</h3><p>2 Pause Events in a ScanModule and 1 Pause Event in the Chain: SMEvent1 and SMEvent2 with Action <em>ONOFF</em>, ChEvent with Action <em>ONOFF</em></p><p>Scan start with SMEvent1 = <code>false</code>, SMEvent2 = <code>false</code> and ChEvent = <code>false</code></p><p>SMEvent1 = <code>true</code> =&gt; ScanModule paused<br/>ChEvent = <code>true</code> =&gt; Chain paused, nothing happens<br/>SMEvent2 = <code>false</code> =&gt; ScanModule ready for running, nothing happens because ChEvent is <code>true</code> <br/>ChEvent = <code>false</code> =&gt; Chain ready, Scan continues</p></body></html>