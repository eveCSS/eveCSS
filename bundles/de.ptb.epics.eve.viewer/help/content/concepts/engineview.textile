h1(eveTopic|#top). Engine View

{toc:style=circle|maxLevel=2}

h2(eveTopic). Introduction

p. The Engine View allows monitoring and control of scans running in an engine process.

p=. !(eveImage)../../img/concepts/engineview/engineview.png(engine view overview)!

p. It is divided into an Engine group for the engine process, Scan group for the currently loaded scan with Status Table and State indicators for Engine and Inhibit state.

h2(eveTopic). Engine Group

p(backToTop). "back to top":#top

p=. !(eveImage)../../img/concepts/engineview/engineview-enginegroup.png(engine view - engine group with host:port label and start, kill, connect and disconnect buttons)!

p. Following the Engine text label the host and port of the engine process connected to (if any) is shown inside of brackets. Depending on the connection state, several other areas are enabled/disabled.

p. Inside the engine group there are buttons to control the engine process. Their function is described in the table below:

table(eveRefTable).
|_. Button |_. Description|
|_. Start | Creates an engine process with the parameters (i.e. host and port) specified in the preferences and connects to it. |
|_. Kill | Sends a request to the engine to terminate itself. |
|_. Connect | Connects to an existing engine process at __host__:__port__ as specified in the preferences |
|_. Disconnect | Disconnects from the currently connected engine process. |

h2(eveTopic). Scan Group

p(backToTop). "back to top":#top

p=. !(eveImage)../../img/concepts/engineview/engineview-scangroup.png(engine view - scan group with buttons, repeat count, filename, log message, progress bar and status table)!

p. If a scan is currently loaded in the engine the controls inside the scan group become active and the name of the loaded file is shown as a suffix of the Scan label of the group.

p. Several buttons are available to influence the execution of a scan. Their function is described in the table below:

table(eveRefTable).
|_. Button |_. Description|
|_. Play | Starts (or continues a paused) scan. |
|_. Pause | Pauses the scan. |
|_. Stop | Stops the scan after finishing the current scan point. While pending positionings are ignored, post scan actions of the current scan module (and the parents if nested) are still executed. |
|_. Skip | Finishes the current scan point, skips the remaining scan points of the current scan module, executes post scan actions and continues with the next scan module (if any) |
|_. Halt | Stops the scan and immediately stops all motor axes. |
|_. AutoPlay | if activated (toggle button) loaded scans (and iterations if repeat count > 0) start automatically |

p. TODO Play Button 

p. Besides the available buttons there are some status fields as well as options to repeat the currently loaded scan and add comments to it. See details below:

h3(eveTopic). repeat count

p. The __Repeat Count__ displays the number of times the scan should be repeated. As long as the scan is not finished the repeat count is editable.

h3(eveTopic). Filename

p. Shows the path and name of the file the measuring data is written to.

h3(eveTopic). live Comment

p. Allows writing (multiple) comments to the current data file. When pressing the button "Send to File" the entered text is send to the engine (which saves it in the file with a timestamp).

h3(eveTopic). Progress Bar

p. Shows the progress of the current scan by showing the absolute and relative ratio of finished positions to the number of total positions. The background color fill also represents the relative ratio.

h3(eveTopic). Status Table

p. Shows the chains, scan modules and their states of the currently loaded scan. A remaining time as well as additional event information (if any) are also shown.

h2(eveTopic). Engine State Indicator

p(backToTop). "back to top":#top

p. 

table(eveRefTable).
|_. state |_. Description|
| !../../img/concepts/engineview/enginestate-grey.png(engine state with grey background)! | |
| !../../img/concepts/engineview/enginestate-red2.png(engine state with grey background)! | |
| !../../img/concepts/engineview/enginestate-green.png(engine state with grey background)! | |
| !../../img/concepts/engineview/enginestate-yellow.png(engine state with grey background)! | |
| !../../img/concepts/engineview/enginestate-red.png(engine state with grey background)! | |

h2(eveTopic). Inhibit State Indicator

p(backToTop). "back to top":#top

p. 

table(eveRefTable).
|_. state |_. Description|
| !../../img/concepts/engineview/inhibitstate-grey.png(inhibit state with grey background)! | |
| !../../img/concepts/engineview/inhibitstate-green.png(inhibit state with green background and black text false)! | |
| !../../img/concepts/engineview/inhibitstate-red.png(inhibit state with red background and white text true)! | |
| !../../img/concepts/engineview/inhibitstate-yellow.png(inhibit state with yellow background and black test overridden)! | |


TODO Tooltip



% TODO

h2(eveTopic). Manual Override (Play Button)

p(backToTop). "back to top":#top

p. Any client connected to an engine executing a scan which currently is paused due to an inhibit state evaluated to __true__, can override that state by pressing the __Play__-Button. Any pause condition which evaluated to __true__ is now in an __overridden__ state as long as it becomes __false__ again. If there are only false and overridden pause conditions the chain resumes execution.

h2(eveTopic). User-Pause (Pause Button)

p(backToTop). "back to top":#top

p. Keep in mind, that by pressing the pause button, the whole scan is paused, i.e. each chain is paused. The user pause overrules any inhibit states. A scan paused by the user can only be resumed by pressing the __Play__-Button (even if all pause conditions suddenly evaluate to __false__).