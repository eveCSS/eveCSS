<?xml version='1.0' encoding='utf-8' ?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><title>detectorchannelview</title><link type="text/css" rel="stylesheet" href="PLUGINS_ROOT/de.ptb.epics.eve.editor/help/css/editor.css"/></head><body><h1 id="DetectorChannelView" class="eveTopic">Detector Channel View</h1><p>The Detector Channel View displays (and allows to modify) properties of a channel. The channel being shown is the one selected in the <a href="scanmodule.html">Scan Module View</a>. </p><p>Generally a channel has one of three modes which determines its behavior. Depending on the channel mode the Detector Channel View will show different properties. These properties are described in detail for each mode in the following subsections.</p><h2 id="StandardModeChannel" class="eveTopic">Standard (Mode) Channel</h2><p>The standard mode as the name suggests is the one most commonly used. Several properties can be set. The image below shows an example of a channel in standard mode followed by a short description of each property.</p><p style="text-align: center;"><img class="eveImage" alt="detector channel view example of a standard mode channel" title="detector channel view example of a standard mode channel" border="0" src="../../img/concepts/DetectorChannelView/standardchannel.png"/></p><p><strong>Average :</strong> Determines how many channel readings are taken to calculate the average. </p><p><strong>Max Deviation  (%):</strong> The deviation of the first two measured values must be less or equal then the given value in percent to be valid. If that constraint ist not fulfilled, the first measured value is discarded and a new value is taken until the condition is met.</p><p><strong>Minimum:</strong> If the first measured value is greater than or equal the given value a tolerance check is conducted. </p><p><strong>Max. Attempts:</strong> If the tolerance check failed the given value amount of times, the check is stopped an the next values are used for the average calculation.</p><p><strong>Normalize Channel:</strong> The channel is normalized by the given channel. The calculation of the deviation is based on the normalized value.</p><p><strong>Deferred Trigger:</strong> If set, this channel is triggered after all other channels in the same scan module (which are not deferred) are read.</p><p><strong>Redo:</strong> Events which when occurring restart the channel calculation are defined here. A more detailed description about events can be found <a href="events.html">here</a>.</p><p>The following subsections illustrate the standard mode behavior by examples.</p><h3 id="Example1trivialstandardmode" class="eveTopic">Example 1 &#8211; trivial standard mode</h3><p><i>Average</i> = &empty;, <i>Max. Deviation (%)</i> = &empty;, <i>Minimum</i> = &empty;, <i>Max. Attempts</i> = &empty;</p><p><i>Average</i> omitted &rArr; no average is calculated.</p><h3 id="Example2standardmodeandaverage" class="eveTopic">Example 2 &#8211; standard mode and average</h3><p><i>Average</i> = 3, <i>Max. Deviation (%)</i> = &empty;, <i>Minimum</i> = &empty;, <i>Max. Attempts</i> = &empty;</p><p><i>Minimum</i> omitted &rArr; <i>Average</i> is calculated from three subsequent measurements.</p><p>measured values: {<span class="green">0.00197</span>, <span class="green">0.00199</span>, <span class="green">0.00153</span>} &rArr; <i>Average</i> = 0.00183</p><h3 id="Example3averageandminimum" class="eveTopic">Example 3 &#8211; average and minimum</h3><p><i>Average</i> = 3, <i>Max. Deviation (%)</i> = &empty;, <i>Minimum</i> = 1.0, <i>Max. Attempts</i> = &empty;</p><p>measured value: -0.898492 &rArr; value is less than <i>Minimum</i> &rArr; <i>Average</i> is calculated from three subsequent measurements.</p><p>measured values: {<span class="green">-0.898492</span>, <span class="green">-0.900868</span>, <span class="green">-0.906199</span>} &rArr; <i>Average</i> = -0.901853</p><p><span class="red">Achtung, bisher (Version 1.7) wird hier nur 1 Messwert aufgenommen</span></p><h3 id="Example4averageandminimum" class="eveTopic">Example 4 &#8211; average and minimum</h3><p><i>Average</i> = 3, <i>Max. Deviation (%)</i> = &empty;, <i>Minimum</i> = 0.0001, <i>Max. Attempts</i> = &empty;</p><p>measured values: {<span class="green">0.00197</span>, <span class="green">0.00199</span>, <span class="green">0.00153</span>} &rArr; <i>Average</i> = 0.00183</p><h3 id="Example5maxdeviation" class="eveTopic">Example 5 &#8211; max deviation</h3><p><i>Average</i> = 3, <i>Max. Deviation (%)</i> = 5, <i>Minimum</i> = 0.3, <i>Max. Attempts</i> = 10</p><p>measured values: {<span class="red">4.231</span>, <span class="green">4.787</span>, <span class="green">4.687</span>, <span class="green">4.732</span>}<br/><i>Max. Deviation (%)</i> from 1 and 2: 13.14 =&gt; discard first value <br/><i>Max. Deviation (%)</i> from 2 and 3:  2.09 =&gt; Deviation is OK </p><p>&rArr; value of the channel is the <i>Average</i> from 2., 3. and 4. point: = 4.735</p><h3 id="Example6maxdeviationandmaxattempts" class="eveTopic">Example 6 &#8211; max deviation and max attempts</h3><p><i>Average</i> = 3, <i>Max. Deviation (%)</i> = 0.5, <i>Minimum</i> = 1e-8, <i>Max. Attempts</i> = 5</p><p>measured values: {<span class="red">4.231</span>, <span class="red">4.787</span>, <span class="red">4.687</span>, <span class="red">4.732</span>, <span class="red">4.894</span>, <span class="green">4.738</span>, <span class="green">4.834</span>, <span class="green">4.963</span>)</p><p><i>Max. Deviation (%)</i> from 1 and 2: 13.14 =&gt; discard first value <br/><i>Max. Deviation (%)</i> from 2 and 3:  2.09 =&gt; discard second value <br/><i>Max. Deviation (%)</i> from 3 and 4:  0.96 =&gt; discard third value <br/><i>Max. Deviation (%)</i> from 4 and 5:  2.09 =&gt; discard fourth value <br/><i>Max. Deviation (%)</i> from 5 and 6:  3.42 =&gt; discard fifth value </p><p><i>Max. Attempts</i> reached &rArr; value of the channel is the <i>Average</i> from 6., 7. and 8. point: = 4.845</p><p><span class="red">Achtung, bisher (Version 1.7) wird hier nur 1 Messwert aufgenommen (der 6. Wert)</span></p><h2 id="IntervalModeChannel" class="eveTopic">Interval (Mode) Channel</h2><p>The interval mode calculates a mean of values measured on a given interval until another channel is done. The resulting data file contains only one measurement, the mean (aside of some additional information such as the standard deviation). The image below shows an example of a channel in interval mode followed by a short description of each property.</p><p style="text-align: center;"><img class="eveImage" alt="detector channel view example of a interval mode channel" title="detector channel view example of a interval mode channel" border="0" src="../../img/concepts/DetectorChannelView/intervalchannel.png"/></p><p><strong>Normalize Channel:</strong> The channel is normalized by the given channel. The calculation of the mean is based on the normalized value.</p><p><strong>Trigger Interval:</strong> The interval/rate measurements are taken.</p><p><strong>Stopped By:</strong> The channel which when finished stops the mean calculation.</p><h3 id="Example1trivialintervalmode" class="eveTopic">Example 1 &#8211; trivial interval mode</h3><p>Let y <sub>i</sub> be the i-th measurement, x <sub>i</sub> the timer in seconds, the trigger interval two seconds and the stop event trigger at eleven seconds.</p><p>Then the measurements taken are (0, y <sub>1</sub>), (2, y <sub>2</sub>), (4, y <sub>3</sub>), (6, y <sub>4</sub>), (8, y <sub>5</sub>), (10, y <sub>6</sub>) and the mean is </p><p><img class="eveImage" alt="interval sum formula: sum from 1 to 6 of y index i" title="interval sum formula: sum from 1 to 6 of y index i" border="0" src="../../img/concepts/DetectorChannelView/interval-sum.png"/></p><h3 id="Example2intervalmodeandnormalization" class="eveTopic">Example 2 &#8211; interval mode and normalization</h3><p>Reconsider example 1 extended by a normalization channel z. </p><p>Then the measurements taken are (0, y <sub>1</sub>/z <sub>1</sub>), (2, y <sub>2</sub>/z <sub>2</sub>), (4, y <sub>3</sub>/z <sub>3</sub>), (6, y <sub>4</sub>/z <sub>4</sub>), (8, y <sub>5</sub>/z <sub>5</sub>), (10, y <sub>6</sub>/z <sub>6</sub>) and the mean is</p><p><img class="eveImage" alt="interval sum formula: sum from 1 to 6 of y index i divided by z index i" title="interval sum formula: sum from 1 to 6 of y index i divided by z index i" border="0" src="../../img/concepts/DetectorChannelView/interval-sum-normalized.png"/></p><p>Take into account that in interval mode only the mean value (alongside the number of measurements and the standard deviation) is written to the data file. </p><h2 id="NormalizeModeChannel" class="eveTopic">Normalize (Mode) Channel</h2><p>the normalize mode is a special mode. It does not have any properties at all. It just indicates that the selected channel is used for normalization by another channel (or channels). The properties are derived from the channel it normalizes. The image below shows an example of a channel in normalize mode.</p><p style="text-align: center;"><img class="eveImage" alt="detector channel view example of a normalize mode channel" title="detector channel view example of a normalize mode channel" border="0" src="../../img/concepts/DetectorChannelView/normalizedchannel.png"/></p><h3 id="Example1trivialnormalizationmode" class="eveTopic">Example 1 &#8211; trivial normalization mode</h3><p>Consider the following Situation. &#8222;Channel A&#8221; is defined in standard mode with average set to 1 and normalized by another channel called &#8222;Channel B&#8221;. Additionally a motor M with three positions (m <sub>i</sub> being the i-th position) is declared.</p><p>When selecting Channel B in the Scan Module View the Detector Channel View would show only disabled controls with the hint that Channel B is used as normalize channel by Channel A.</p><p>The measurements taken are (m <sub>1</sub>, A <sub>1</sub>/B <sub>1</sub>), (m <sub>2</sub>, A <sub>2</sub>/B <sub>2</sub>), (m <sub>3</sub>, A <sub>3</sub>/B <sub>3</sub>).</p><h3 id="Example2normalizationandaverage" class="eveTopic">Example 2 &#8211; normalization and average</h3><p>Consider example 1 but with average set to 3.</p><p>The measurements taken are (m <sub>1</sub>, A <sub>1</sub>/B <sub>1</sub>), (m <sub>2</sub>, A <sub>2</sub>/B <sub>2</sub>), (m <sub>3</sub>, A <sub>3</sub>/B <sub>3</sub>) at which each A <sub>i</sub>/B <sub>i</sub> is the average calculated by three measurements.</p><h3 id="Example3normalizationchannelusedbymorethanonechannel" class="eveTopic">Example 3 &#8211; normalization channel used by more than one channel</h3><p>Consider &#8222;Channel A&#8221; (standard mode with average set to 1) and &#8222;Channel B&#8221; (standard mode with average set to 2), both normalized by &#8222;Channel C&#8221;. Additionally a motor M with three positions (m <sub>i</sub> being the i-th position) is declared.</p><p>The measurements taken are </p><ul><li>(m <sub>1</sub>, A <sub>1</sub>/C <sub>1</sub>), (m <sub>2</sub>, A <sub>2</sub>/C <sub>2</sub>), (m <sub>3</sub>, A <sub>3</sub>/C <sub>3</sub>) and</li><li>(m <sub>1</sub>, B <sub>1</sub>/C <sub>1</sub>), (m <sub>2</sub>, B <sub>2</sub>/C <sub>2</sub>), (m <sub>3</sub>, B <sub>3</sub>/C <sub>3</sub>) at which each B <sub>i</sub>/C <sub>i</sub> is the average calculated by two measurements.</li></ul></body></html>